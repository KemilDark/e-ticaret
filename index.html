<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Ticaret Sitesi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
    
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyDGZ_0sb0XEYY0RbQ3qk_BWToXw0CPt0II",
      authDomain: "e-ticaret-74b1c.firebaseapp.com",
      projectId: "e-ticaret-74b1c",
      storageBucket: "e-ticaret-74b1c.appspot.com",
      messagingSenderId: "547307588836",
      appId: "1:547307588836:web:f07b04c5d1b6300efe70f1",
      measurementId: "G-GTL1NTV1G1"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Kullanıcı durumunu kontrol et
    onAuthStateChanged(auth, (user) => {
      if (user) {
        document.getElementById("auth-section").classList.add("hidden");
        document.getElementById("main-section").classList.remove("hidden");
      } else {
        document.getElementById("auth-section").classList.remove("hidden");
        document.getElementById("main-section").classList.add("hidden");
      }
    });

    function registerUser() {
      const email = document.getElementById("register-email").value;
      const password = document.getElementById("register-password").value;
      createUserWithEmailAndPassword(auth, email, password)
        .then(() => alert("Kayıt başarılı!"))
        .catch((error) => alert(error.message));
    }

    function loginUser() {
      const email = document.getElementById("login-email").value;
      const password = document.getElementById("login-password").value;
      signInWithEmailAndPassword(auth, email, password)
        .then(() => alert("Giriş başarılı!"))
        .catch((error) => alert(error.message));
    }

    function logoutUser() {
      signOut(auth).then(() => alert("Çıkış yapıldı!"));
    }
  </script>
</head>
<body class="bg-black text-gray-200 font-sans">
  <!-- Kayıt ve Giriş Formu -->
  <section id="auth-section" class="mt-6 px-4">
    <div class="bg-gray-800 p-6 rounded shadow-md">
      <h2 class="text-2xl mb-4">Kayıt Ol</h2>
      <input type="email" id="register-email" placeholder="Email" class="w-full mb-3 p-2 rounded">
      <input type="password" id="register-password" placeholder="Şifre" class="w-full mb-3 p-2 rounded">
      <button type="button" onclick="registerUser()" class="bg-blue-600 w-full py-2 rounded text-white">Kayıt Ol</button>
    </div>
    <div class="bg-gray-800 p-6 rounded shadow-md mt-4">
      <h2 class="text-2xl mb-4">Giriş Yap</h2>
      <input type="email" id="login-email" placeholder="Email" class="w-full mb-3 p-2 rounded">
      <input type="password" id="login-password" placeholder="Şifre" class="w-full mb-3 p-2 rounded">
      <button type="button" onclick="loginUser()" class="bg-green-600 w-full py-2 rounded text-white">Giriş Yap</button>
    </div>
  </section>

  <!-- Ana İçerik -->
  <section id="main-section" class="hidden mt-4">
    <h2 class="text-3xl font-bold text-center mb-4">Mağazamıza Hoş Geldiniz!</h2>
    <button onclick="logoutUser()" class="bg-red-600 w-full py-2 rounded text-white">Çıkış Yap</button>
  </section>
</body>
</html>
